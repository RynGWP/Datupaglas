<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>User Management</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- DataTables -->
  <link rel="stylesheet" href="/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <!-- <link rel="stylesheet" href="/plugins/datatables-buttons/css/buttons.bootstrap4.min.css"> -->
  <!-- Theme style -->
  <link rel="stylesheet" href="/dist/css/adminlte.min.css">
  <!-- SweetAlert2 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <!-- Toastr -->
  <link rel="stylesheet" href="/plugins/toastr/toastr.min.css">
  <!-- BS Stepper -->
  <link rel="stylesheet" href="/plugins/bs-stepper/css/bs-stepper.min.css">
   <!-- daterange picker -->
   <link rel="stylesheet" href="/plugins/daterangepicker/daterangepicker.css">
     <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
<!-- Header styles -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">
  <link rel="stylesheet" href="style2.css">
<style>

  .btn-primary.next, .btn-secondary.previous, .btn-success.finish {
    width: 100px;
    margin:5px;
  }

  p{
    margin-bottom: 0;
  }

  label {
    font-weight: 550 !important;
  }

  input, .custom-select, .datetimepicker-input.date, .input-group.date  {
    border-top: none !important;
    border-right: none !important;
    border-left: none !important;
    border-bottom: 1px solid rgba(82, 134, 203, 0.167);
    width: 300px;
    outline:none !important;
    box-shadow: none;
    border-radius:0;
  }


  .input-group-text {
    border:none;
    background: none;
    box-shadow: none !important;
    border-radius: 0;
    outline: none;
  }

  .list-group-item {
    border:none;
  }

  .nav-icon {
  color:rgb(58, 59, 66);
}

p {
  color:rgb(119, 119, 134);
}


.nav-link.active{
  background-color: rgba(127, 127, 189, 0.338) !important;
}


.brand-link{
  border-bottom: none !important;
}


</style>

</head>
<body class="hold-transition sidebar-mini layout-fixed">

     <!-- preloader -->
     <%- include('../partials/preloader.ejs') %>

  <div class="wrapper">
  
  
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand  navbar-light"  style="background: #e6eaea;">
      <!-- Left navbar links -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link text-light" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <!-- <li class="nav-item d-none d-sm-inline-block">
          <a href="index3.html" class="nav-link text-light">Home</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="#" class="nav-link">Contact</a>
        </li> -->
      </ul>
  
      <!-- Right navbar links -->
      <ul class="navbar-nav ml-auto">
        <!-- Navbar Search -->
        <!-- <button type="button" class="btn dropdown-toggle dropdown-icon text-light" data-toggle="dropdown" aria-expanded="false">
         Assessor <i class="fas fa-user"></i>
        </button> -->


         <%- include('../partials/profile.ejs') %>

         
      </ul>
    </nav>
    <!-- /.navbar -->
  
    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
      <!-- Brand Logo -->
      <a href="index3.html" class="brand-link" 
      style="background-color: #ffffff;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(4px) saturate(180%);
    -webkit-backdrop-filter: blur(2px) saturate(180%);
      ">
        <img src="/images/Seal_of_Datu_Paglas.png" alt="AdminLTE Logo" class="brand-image img-circle " style="opacity: .8">
        <small class="brand-text font-weight-bold text-dark"> DATU PAGLAS</small> 
      </a> 
  
      <!-- Sidebar -->
      <div class="sidebar" style="background-color: #ffffff;
      box-shadow: 0 4px 30px rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(4px) saturate(180%);
    -webkit-backdrop-filter: blur(2px) saturate(180%);
      ">
  
  
  
        <!-- Sidebar Menu -->
        <nav class="mt-2">
          <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
            <!-- Add icons to the links using the .nav-icon class
                 with font-awesome or any other icon font library -->
                 <li class="nav-item ">
                  <a href="/adminDashboard" class="nav-link ">
                    <i class="nav-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class=" bi bi-house" viewBox="0 0 16 16">
                      <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
                    </svg></i>
                    <p>
                      Dashboard   
                    </p>
                  </a>
                 
                <li class="nav-item">
                  <a href="/taxPayer" class="nav-link ">
                    <i class="nav-icon">  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class=" bi bi-person-gear" viewBox="0 0 16 16">
                      <path d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m.256 7a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1zm3.63-4.54c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382zM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/>
                    </svg></i>
                    <p>
                      User Management
           
                    </p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="/userlist" class="nav-link">
                    <i class="nav-icon "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-lines-fill" viewBox="0 0 16 16">
                      <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5m.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z"/>
                    </svg></i>
                    <p>
                      User List
                    </p>
                  </a>
                </li>
          
          </ul>
        </nav>
        <!-- /.sidebar-menu -->
      </div>
      <!-- /.sidebar -->
    </aside>
  
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <div class="content-header">
        <div class="container-fluid">
          <div class="row mb-2 ">
            <div class="col-sm-6">
              <h1 class="m-0"> Edit Profile </h1>
            </div><!-- /.col -->
            <div class="col-lg-6">
              <form id="updateForm" action="/updateTaxPayerProfile" method="post">
              <div class="d-flex justify-content-end ">
                <button type="submit" class="btn edit-btn" data-toggle="modal" data-target="#addModal" style="background:green; border: 1px solid rgb(35, 203, 52); color: white;">
                  Save Changes                              
                 </button>
               </div>
            </div>
          </div><!-- /.row -->
        </div><!-- /.container-fluid -->
      </div>
      <!-- /.content-header -->


                <!-- Main content -->
    <section class="content p-3">
      <div class="container-fluid">
        
        <div class="row justify-content-center"> 
          <div class="col-md-6">           
            <% if(locals.taxPayer) { %>
             
            <!-- Profile Image -->
            <div class="card card-primary card-outline">
              <div class="card-body box-profile">
                <div class="text-center">
                  <img class="profile-user-img img-fluid img-circle mb-3" src="<%= taxPayer.picture %>" alt="User profile picture">
                </div>

                <h3 class="profile-username text-center">  </h3>

                <p class="text-muted text-center">Tax Payer</p>

                <ul class="list-group list-group-unbordered my-3">
                  <input type="hidden" name="taxpayer_id" value="<%= taxPayer.taxpayer_id %>">
                  <li class="list-group-item">
                    <b>Firstname</b> <a class="float-right"> <input type="text" name="firstname" value="<%= taxPayer.firstname %>"> </a>
                  </li>
                  <li class="list-group-item">
                    <b>Middlename</b> <a class="float-right"> <input type="text" name="middlename" value="<%= taxPayer.middlename %>"> </a>
                  </li>
                  <li class="list-group-item">
                    <b>Lastname</b> <a class="float-right"> <input type="text" name="lastname" value="<%= taxPayer.lastname %>"> </a>
                  </li>
                  
                  <li class="list-group-item">
                    <b>Email</b> <a class="float-right"><input type="text" name="email" value="<%= taxPayer.email %>"></a>
                  </li>
                  <li class="list-group-item">
                    <b>Phone Number</b> <a class="float-right"> <input type="number" name="phone" value="<%= taxPayer.phone %>"></a>
                  </li>
                  <li class="list-group-item">
                    <b>Place of Birth</b> <a class="float-right"> <input type="text" name="place_of_birth" value="<%= taxPayer.place_of_birth %>"></a>
                  </li>
                  <li class="list-group-item">
                    <b>Complete Address</b> <a class="float-right"> <input type="text" name="complete_address" value="<%= taxPayer.complete_address %>"></a>
                  </li>
                  <li class="list-group-item">
                    <b>Status</b> <a class="float-right">
                      <select class="custom-select" id="status" name="status" required>
                        <option value="<%= taxPayer.status %>" selected ><%= taxPayer.status %></option>
                        <option value="single">Single</option>
                        <option value="married">Married</option>
                      </select>
                    </a>
                  </li>
                  <li class="list-group-item">
                    <b>Gender</b> <a class="float-right">
                      <select class="custom-select" id="gender" name="gender" required>
                        <option value="<%= taxPayer.gender %>" selected ><%= taxPayer.gender %></option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                      </select>
                    </a>
                  </li>
                  <li class="list-group-item">
                    <b>Date of Birth</b> <a class="float-right"> <input type="text" name="date_of_birth" value="<%= new Date(taxPayer.date_of_birth).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %>"></a>
                  </li>
                </ul>

              
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
        
            <% } %>

          </div>
          <!-- /.col -->
          <% if (locals.additionalPerson) { %>
          <!-- second columm -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-header p-2">
                <div class="card-title"><h5>Additional Person</h5></div>
              </div><!-- /.card-header -->
              <div class="card-body">
                <div class="tab-content">
                  <div class="active tab-pane" id="additionalPerson">
                      <ul class="list-group list-group-unbordered mb-3">
                          <li class="list-group-item">
                          <b>Firstname</b> <a class="float-right"><input type="text" name="additionalFirstname" value="<%= additionalPerson.firstname %>"></a>
                          </li>
                          <li class="list-group-item">
                          <b>Middlename</b> <a class="float-right"><input type="text" name="additionalMiddlename" value="<%= additionalPerson.middlename %>"></a>
                          </li>
                          <li class="list-group-item">
                          <b>Lastname</b> <a class="float-right"><input type="text" name="additionalLastname" value="<%= additionalPerson.lastname %>"></a>
                          </li>
                          <li class="list-group-item">
                          <b>Email</b> <a class="float-right"> <input type="text" name="additionalEmail" value="<%= additionalPerson.email %>"></a>
                          </li>
                          <li class="list-group-item">
                          <b>Phone Number</b> <a class="float-right"><input type="number" name="additionalPhone" value="<%= additionalPerson.phone %>"></a>
                          </li>
                          <li class="list-group-item">
                          <b>Complete Address</b> <a class="float-right"> <input type="text" name="additionalCompleteAddress" value="<%= additionalPerson.complete_address %>"></a>
                          </li>
                          <li class="list-group-item">
                          <b>Relationship</b> <a class="float-right"> <input type="text" name="relationship" value="<%= additionalPerson.relationship%>"></a>
                          </li>          
                      </ul>
                  </div>
                  <% } %>
                  <!--------------------------------------- /additional person  ----------------------------------->


                 

                </div>
                <!-- /.tab-content -->
              </div><!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
         <!-- /second column -->
        
        </div>
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
        </form>

  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    <div class="float-right d-none d-sm-block">
      <b>Version</b> 3.2.0
    </div>
    <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->


<script src="/plugins/jquery/jquery.min.js"></script>
<script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<!-- <script src="/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script> -->
<!-- <script src="/plugins/jszip/jszip.min.js"></script>
<script src="/plugins/pdfmake/pdfmake.min.js"></script>
<script src="/plugins/pdfmake/vfs_fonts.js"></script>
<script src="/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="/plugins/datatables-buttons/js/buttons.print.min.js"></script> -->
<!-- <script src="/plugins/datatables-buttons/js/buttons.colVis.min.js"></script> -->
<script src="/dist/js/adminlte.min.js"></script>
<script src="/plugins/bs-stepper/js/bs-stepper.min.js"></script>
<!-- <script src="/plugins/dropzone/min/dropzone.min.js"></script> -->
<script src="/plugins/moment/moment.min.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>

<!-- Toastr -->
<script src="/plugins/toastr/toastr.min.js"></script>


<script>

        $('#dateOfBirth').datetimepicker({
            format: 'L'
        });
        $('#lastAssessmentDate').datetimepicker({
            format: 'L'
        });
        $('#nextAssessmentDate').datetimepicker({
            format: 'L'
        });


        // update form 

        $('.edit-btn').on('click', function() {
          const updateForm = document.querySelector('#updateForm');

          localStorage.setItem('showToastUpdate', 'true');

          updateForm.submit();
          
        });

        document.addEventListener('DOMContentLoaded', () => {
          if(localStorage.getItem('showToastUpdate') === 'true' ) {

            Toastify({
            text: "Updated successfully!",
            duration: 5000, // Show the toast for 5 seconds
            close: true,
            gravity: "top", // Toast position
            position: "right", // Toast alignment
            progressBar: true, // Enable progress bar
            style: {
                background: "linear-gradient(to right, #00b09b, #96c93d)",
            }

        }).showToast();

        // Remove the flag from localStorage to prevent showing it again
        localStorage.removeItem('showToastUpdate');
    }
        });

</script>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="/userManagementScript.js"></script>
<script src="/preloader.js"></script>
</body>
</html>




