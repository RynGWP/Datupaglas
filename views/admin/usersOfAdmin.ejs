<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Home Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
   <!-- Main Container -->
   <div class="container-fluid p-0"> <!-- Remove padding to prevent any gaps -->
    <%- include("../partials/adminNav.ejs") %>
  

      <div class="row m-0  flex-nowrap ">
          <!-- Sidebar Column -->
          <div class="col-12 col-md-3 col-lg-2 p-2 col-sm-3 bg-light collapse sidebar" id="sidebar" >
              <%- include("../partials/adminSidebar.ejs") %>
          </div>

        

          <!-- Main Content Column -->
          <div class="col-12 col-md-9 col-lg-10 p-0 main-content">
              <div class="container p-0">
                  <span class="date d-block p-2 mx-2 my-2 mb-3 d-flex justify-content-between text-md-start">
                      <p class="text-dark fs-4 text-lighter d-flex flex-start ">My Health Workers</p>
                      <p class="text-dark fs-4 text-lighter d-flex flex-start "><%= new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %></p>
                  </span>

        <div class="container-fluid d-flex justify-content-center mb-5 ">
            <div class="card col-lg-12 p-3 col-sm-12 mb-5">
                <div class="table-responsive">
                    <table class="table table-hover" id="patientsTable">
                        <thead>
                            <tr>                          
                                <th class="userPatientsNameTh ">First name</th>
                                <th class="userPatientsNameTh ps-0">Last name</th>
                                <th class="userPatientsProperties ps-0">Email</th>
                                <th class="userPatientsProperties ps-0">Contact</th>              
                                <th class="userPatientsProperties ps-0">Barangay</th>
                            
                                <th class="userPatientsNameTh text-center ps-0">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (locals.patients) { %>
                                <% patients.forEach(function(patient) { %>
                                    <tr>
                                        <td class="userPatientsId my-0"><%= patient.patient_id %> </td>
                                        <td class="userPatientsNameTd my-0"><%= patient.first_name %> </td>
                                        <td class="userPatientsNameTd ps-0"><%= patient.last_name %></td>
                                        <td class="userPatientsData ps-0"><%= patient.email %></td>   
                                        <td class="userPatientsData ps-0"><%= patient.contact_number %></td>
                                        <td class="userPatientsData ps-0"><%= new Date(patient.birthday).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %></td>
                                        <td class="userPatientsData ps-0"><%= new Date(patient.registration_date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %></td>
                                        <td class="userPatientsData ps-0"><%= patient.barangay %></td>
                                        <td class="userPatientsData ps-0"><%= patient.gender %></td>
                                        <td class="tdAction">
                                          <!-- View Button -->
                                          <button type="button" class="btn btn-info btn-sm viewButton" aria-label="View Patient" data-bs-toggle="modal" data-bs-target="#viewPatientModal">
                                            <!-- SVG icon for view -->
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                                              <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
                                              <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                                            </svg>
                                          </button>
                                        
                                          <!-- Edit Button -->
                                          <button type="button" class="btn btn-primary btn-sm text-light editButton" aria-label="Edit Patient">
                                            <!-- SVG icon for edit -->
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                              <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                              <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                                            </svg>
                                          </button>
                                        
                                          <!-- Delete Form -->
                                          <form action="/patients/delete/<%= patient.patient_id %>" method="POST" style="display:inline;">
                                            <button type="submit" class="btn btn-danger btn-sm deleteButton" aria-label="Delete Patient">
                                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zM8 5.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zM11.5 6a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4H2.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                                              </svg>
                                            </button>
                                          </form>
                                        </td>
                                        
                                        
                                    </tr>
                                <% }) %>
                            <% } else { %>
                                <tr>
                                    <td colspan="7" class="text-center text-light">No Health Workers found</td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        

        <!-- View modal -->
<div class="modal fade" id="viewPatientModal" tabindex="-1" aria-labelledby="viewPatientModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="viewPatientModalLabel">Patient Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p class="modalTextResult">First Name: <span class="text-lightSteelBlue" id="patientFirstName"></span></p>
          <p class="modalTextResult">Last Name: <span class="text-lightSteelBlue" id="patientLastName"></span></p>
          <p class="modalTextResult">Email: <span class="text-lightSteelBlue" id="patientEmail"></span></p>
          <p class="modalTextResult">Contact Number: <span class="text-lightSteelBlue" id="patientContact"></span></p>
          <p class="modalTextResult">Birthday: <span class="text-lightSteelBlue" id="patientBirthday"></span></p>
          <p class="modalTextResult">Registration Date: <span class="text-lightSteelBlue" id="patientRegistrationDate"></span></p>
          <p class="modalTextResult">Barangay: <span class="text-lightSteelBlue" id="patientBarangay"></span></p>
          <p class="modalTextResult">Gender: <span class="text-lightSteelBlue" id="patientGender"></span></p>
          <!-- Add more fields as needed -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


   <!-- Update Patient Modal -->
   <div class="modal fade" id="editPatientModal" tabindex="-1" aria-labelledby="editPatientModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editPatientModalLabel">Edit Patient Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-white"> <!-- Added text-white class here -->
          <form id="editPatientForm">
            <input type="hidden" id="patientId" name="patientId">
            <div class="mb-3">
              <label for="firstName" class="form-label">First Name</label>
              <input type="text" class="form-control text-white" id="firstName" name="firstName"> <!-- Input with white text -->
            </div>
            <div class="mb-3">
              <label for="lastName" class="form-label">Last Name</label>
              <input type="text" class="form-control text-white" id="lastName" name="lastName"> <!-- Input with white text -->
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control text-white" id="email" name="email"> <!-- Input with white text -->
            </div>
            <div class="mb-3">
              <label for="contactNumber" class="form-label">Contact Number</label>
              <input type="text" class="form-control text-white" id="contactNumber" name="contactNumber"> <!-- Input with white text -->
            </div>
            <div class="mb-3">
              <label for="birthday" class="form-label">Birthday</label>
              <input type="text" class="form-control text-white" id="birthday" placeholder="Select Birthday yyyy/mm/dd" name="birthday"> <!-- Input with white text -->
            </div>
            <div class="mb-3">
              <label for="birthday" class="form-label">Registration Date</label>
              <input type="text" class="form-control text-white" id="registrationDate" placeholder="Select Birthday yyyy/mm/dd" name="registrationDate"> <!-- Input with white text -->
            </div>
            <div class="mb-3">
              <label for="barangay" class="form-label">Barangay</label>
              <input type="text" class="form-control text-white" id="barangay" name="barangay"> <!-- Input with white text -->
            </div>
            <div class="mb-5">
              <label for="barangay" class="form-label">Gender</label>
              <input type="text" class="form-control text-white" id="gender" name="gender"> <!-- Input with white text -->
            </div>
           <div class="d-flex justify-content-end ">
            <button type="submit" class="btn btn-success">Update</button>
            <button type="button" class="btn btn-danger ms-2" data-bs-dismiss="modal">Cancel</button>
           </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div> <!-- End of Main Content Column -->
</div> <!-- End of Row -->
</div> <!-- End of Main Container -->

  


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="/script.js"></script>
</body>
</html>